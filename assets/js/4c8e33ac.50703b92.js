"use strict";(self.webpackChunkchia_dev_guides=self.webpackChunkchia_dev_guides||[]).push([[697],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=u(n),d=i,h=m["".concat(s,".").concat(d)]||m[d]||c[d]||r;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1834:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var a=n(7462),i=(n(7294),n(3905));const r={id:"chialisp-primer-using-modules",slug:"/chialisp-using-modules",title:"Using Modules"},l=void 0,o={unversionedId:"chialisp-primer/chialisp-primer-using-modules",id:"chialisp-primer/chialisp-primer-using-modules",title:"Using Modules",description:"Up to this point, you have written single expressions and evaluated them on the command-line. However, sometimes you want to split your code into multiple functions or include common libraries. In order to do things like that, you will need to understand what modules are.",source:"@site/guides/chialisp-primer/using-modules.md",sourceDirName:"chialisp-primer",slug:"/chialisp-using-modules",permalink:"/guides/chialisp-using-modules",draft:!1,editUrl:"https://github.com/Chia-Network/chia-dev-guides/edit/main/guides/chialisp-primer/using-modules.md",tags:[],version:"current",frontMatter:{id:"chialisp-primer-using-modules",slug:"/chialisp-using-modules",title:"Using Modules"},sidebar:"tutorialSidebar",previous:{title:"Intro to Chialisp",permalink:"/guides/"},next:{title:"Testnet Setup",permalink:"/guides/chialisp-testnet-setup"}},s={},u=[{value:"Modules",id:"modules",level:2},{value:"Example",id:"example",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:u};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Up to this point, you have written single expressions and evaluated them on the command-line. However, sometimes you want to split your code into multiple functions or include common libraries. In order to do things like that, you will need to understand what modules are."),(0,i.kt)("h2",{id:"modules"},"Modules"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"mod")," operator creates a context for converting the usage of constants into a single expression."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Functions inside the module will not have direct access to the ",(0,i.kt)("a",{parentName:"p",href:"https://chialisp.com/docs/glossary#solution"},"solution"),", so values you need access to will need to be passed in as a function parameter manually."),(0,i.kt)("p",{parentName:"div"},"In other words, there is no concept of ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Scope_(computer_science)"},"scope"),"."))),(0,i.kt)("p",null,"This module will add two arbitrary values together:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-chialisp"},"(mod (first second)\n    (+ first second)\n)\n")),(0,i.kt)("p",null,"And this is an example of defining a constant and a function, followed by their usage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-chialisp"},";;; Raises the number by one order of magnitude.\n\n(mod (value)\n    ; Defines a constant value with a name.\n    (defconstant ORDER_OF_MAGNITUDE 10)\n\n    ; Defines a function that can be called with a value.\n    (defun raise_magnitude (value)\n        (* value ORDER_OF_MAGNITUDE)\n    )\n\n    ; Calls the previously defined function.\n    (raise_magnitude value)\n)\n")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The module takes in a ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," parameter."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"ORDER_OF_MAGNITUDE")," is defined as 10."),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"raise_magnitude")," function takes in a ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," parameter (this is different from the ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," defined as a module parameter)."),(0,i.kt)("li",{parentName:"ol"},"Returns the ",(0,i.kt)("inlineCode",{parentName:"li"},"value")," function parameter multiplied by the ",(0,i.kt)("inlineCode",{parentName:"li"},"ORDER_OF_MAGNITUDE"),"."),(0,i.kt)("li",{parentName:"ol"},"Calls the function with the module parameter ",(0,i.kt)("inlineCode",{parentName:"li"},"value"),".")),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"By now you have seen how some aspects of the language work, and we can use these concepts to write and run a simple Chialisp program. We will write a module that calculates the factorial of a number using ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Recursion"},"recursion"),"."),(0,i.kt)("p",null,"Put this in a file named ",(0,i.kt)("inlineCode",{parentName:"p"},"factorial.clsp"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-chialisp",metastring:'title="factorial.clsp"',title:'"factorial.clsp"'},";;; Calculates a factorial recursively.\n;;; f(n) = n * f(n - 1)\n;;; f(n) = n if n <= 2\n\n(mod (number)\n    ; Defines the factorial function.\n    (defun factorial (number)\n        (if (> number 1)\n            (* number (factorial (- number 1)))\n            1\n        )\n    )\n\n    ; Calls the function with the number provided.\n    (factorial number)\n)\n")),(0,i.kt)("p",null,"Run this example with the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'brun "$(run factorial.clsp)" "(5)"\n')),(0,i.kt)("p",null,"It will compile it and run the result with a solution where ",(0,i.kt)("inlineCode",{parentName:"p"},"number")," is 5. The result of this should be the factorial of that number, which is 120. There were a few new operators used in these examples. For more information, you should refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://chialisp.com/docs/ref/clvm#the-built-in-opcodes"},"operator reference"),". Below is a detailed explanation of how this works."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The module takes in a ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," parameter."),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"factorial")," function also takes in a ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," parameter."),(0,i.kt)("li",{parentName:"ol"},"If the number is greater than 2, returns the number times the previous factorial."),(0,i.kt)("li",{parentName:"ol"},"Otherwise, returns the number itself."),(0,i.kt)("li",{parentName:"ol"},"Call the recursive function with the ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," module parameter.")),(0,i.kt)("p",null,"We can visualize this function with the input 5 as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-chialisp"},"(factorial 5)\n(* 5 (factorial 4))\n(* 5 (* 4 (factorial 3)))\n(* 5 (* 4 (* 3 (factorial 2))))\n(* 5 (* 4 (* 3 (* 2 (factorial 1)))))\n(* 5 (* 4 (* 3 (* 2 1))))\n")),(0,i.kt)("p",null,"Which then simplifies like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-chialisp"},"(* 5 (* 4 (* 3 2)))\n(* 5 (* 4 6))\n(* 5 24)\n120\n")),(0,i.kt)("p",null,"Everything that would normally be written using iteration in an imperative language, for example array modification, is instead written using recursion in Chialisp. It can be hard to understand at first, but eventually it will make more and more sense."),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"Modules allow you to use functional programming in Chialisp, which makes writing it feel more natural. It also allows you to reuse your code and express it in a more clear way."),(0,i.kt)("p",null,"If you have any questions about modules, or anything else, remember to come ask questions on our ",(0,i.kt)("a",{parentName:"p",href:"https://keybase.io/team/chia_network.public"},"Keybase"),"."))}c.isMDXComponent=!0}}]);