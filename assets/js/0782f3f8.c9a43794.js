"use strict";(self.webpackChunkchia_dev_guides=self.webpackChunkchia_dev_guides||[]).push([[437],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),h=i,m=d["".concat(s,".").concat(h)]||d[h]||p[h]||a;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1065:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return p}});var r=n(7462),i=n(3366),a=(n(7294),n(3905)),o=["components"],l={id:"chialisp-concepts-currying",slug:"/chialisp-currying",title:"Currying"},s=void 0,c={unversionedId:"chialisp-concepts/chialisp-concepts-currying",id:"chialisp-concepts/chialisp-concepts-currying",title:"Currying",description:"When you are writing puzzles in Chialisp you may want to have certain parameters decided before the coins are created. This is called currying. It allows puzzles to be reused but have different content and produce a different hash.",source:"@site/guides/chialisp-concepts/currying.md",sourceDirName:"chialisp-concepts",slug:"/chialisp-currying",permalink:"/guides/chialisp-currying",draft:!1,editUrl:"https://github.com/Chia-Network/chia-dev-guides/edit/main/guides/chialisp-concepts/currying.md",tags:[],version:"current",frontMatter:{id:"chialisp-concepts-currying",slug:"/chialisp-currying",title:"Currying"},sidebar:"tutorialSidebar",previous:{title:"Chialisp Concepts",permalink:"/guides/chialisp-concepts"},next:{title:"Inner Puzzles",permalink:"/guides/chialisp-inner-puzzles"}},u={},p=[{value:"Example",id:"example",level:2},{value:"Currying",id:"currying",level:3},{value:"Reuse",id:"reuse",level:3},{value:"Convention",id:"convention",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:p};function h(e){var t=e.components,n=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"When you are writing puzzles in Chialisp you may want to have certain parameters decided before the coins are created. This is called ",(0,a.kt)("strong",{parentName:"p"},"currying"),". It allows puzzles to be reused but have different content and produce a different hash."),(0,a.kt)("p",null,"An example of this is the standard transaction puzzle. One of its parameters is the ",(0,a.kt)("inlineCode",{parentName:"p"},"SYNTHETIC_PUBLIC_KEY"),", which is unique for each address in your wallet. It represents a synthetic child key of your root public key. As such, the puzzle has to be changed for every address. This would be tedious to do without currying, since it allows the original puzzle (also known as the mod) to be used as a template."),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)("p",null,"We're going to write a simple example to try currying on the command line."),(0,a.kt)("p",null,"Write this in a file named ",(0,a.kt)("inlineCode",{parentName:"p"},"multiply.clsp"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-chialisp",metastring:'title="multiply.clsp"',title:'"multiply.clsp"'},"(mod (first second)\n    (* first second)\n)\n")),(0,a.kt)("h3",{id:"currying"},"Currying"),(0,a.kt)("p",null,"Now, we are going to make an instance of this program that will set the value of the parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"first")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"2"),". This will effectively turn this program from a multiplier to a doubler."),(0,a.kt)("p",null,"You can curry it like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cdv clsp curry multiply.clsp -a 2\n")),(0,a.kt)("p",null,"Which should produce the following curried result:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-chialisp"},"(a (q 18 2 5) (c (q . 2) 1))\n")),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"This is no longer in Chialisp form, but rather has been compiled to CLVM. You don't need to understand how this works or be able to read it, but only be aware that it does what was mentioned before."))),(0,a.kt)("p",null,"You can now run this curried CLVM, and include the value to be doubled as the second parameter, like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'brun "(a (q 18 2 5) (c (q . 2) 1))" "(5)"\n')),(0,a.kt)("p",null,"It should output twice the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"5"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-chialisp"},"10\n")),(0,a.kt)("h3",{id:"reuse"},"Reuse"),(0,a.kt)("p",null,"The real use of currying comes from the fact that you can curry it again with a new value:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cdv clsp curry multiply.clsp -a 5\n")),(0,a.kt)("p",null,"Which should produce the following curried result:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-chialisp"},"(a (q 18 2 5) (c (q . 5) 1))\n")),(0,a.kt)("p",null,"This will do the same thing as the previous curried program, except it will multiply by ",(0,a.kt)("inlineCode",{parentName:"p"},"5")," instead of by ",(0,a.kt)("inlineCode",{parentName:"p"},"2"),"."),(0,a.kt)("h2",{id:"convention"},"Convention"),(0,a.kt)("p",null,"In the previous example, we curried a value into a program, but the program did not declare that this was required. However, often times (especially with puzzles), you will be required to curry the value beforehand to use it properly. To indicate that a parameter is meant to be curried in, you write it in ",(0,a.kt)("inlineCode",{parentName:"p"},"SCREAMING_SNAKE_CASE"),"."),(0,a.kt)("p",null,"Let's rewrite the previous example with this convention:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-chialisp",metastring:'title="multiply.clsp"',title:'"multiply.clsp"'},"(mod (FIRST second)\n    (* FIRST second)\n)\n")),(0,a.kt)("p",null,"Writing parameters like this doesn't change anything in how they function, but rather how they are expected to be used. This convention makes it clear that you ",(0,a.kt)("em",{parentName:"p"},"need")," to specify the value of it before creating coins with it on-chain."),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"This is very useful for writing reusable and composable puzzles in Chialisp. It is also commonly used in tandem with ",(0,a.kt)("a",{parentName:"p",href:"/guides/chialisp-inner-puzzles"},"inner puzzles"),". However, currying can be a pretty confusing topic, so if you have any further questions, feel free to ask them on our ",(0,a.kt)("a",{parentName:"p",href:"https://keybase.io/team/chia_network.public"},"Keybase"),"."))}h.isMDXComponent=!0}}]);